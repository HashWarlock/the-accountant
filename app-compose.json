{
  "name": "dstack-js-sdk-demo",
  "version": "1.0.0",
  "description": "TEE-backed key management demo using dstack SDK",
  "image": "ghcr.io/hashwarlock/the-accountant:latest",
  "ports": {
    "3000": {
      "protocol": "http",
      "public": true,
      "description": "Main web application"
    }
  },
  "environment": {
    "NODE_ENV": "production",
    "DATABASE_URL": "file:./dev.db",
    "EXPOSE_INFO": "false"
  },
  "volumes": [
    {
      "source": "/var/run/dstack.sock",
      "target": "/var/run/dstack.sock",
      "readonly": true,
      "description": "dstack TEE socket for secure key operations"
    },
    {
      "source": "db-data",
      "target": "/app/prisma",
      "readonly": false,
      "description": "SQLite database persistence"
    }
  ],
  "attestation": {
    "enabled": true,
    "type": "dcap",
    "mrenclave": "auto",
    "mrsigner": "auto"
  },
  "security": {
    "capabilities_drop": ["ALL"],
    "capabilities_add": ["CHOWN", "SETUID", "SETGID"],
    "no_new_privileges": true,
    "readonly_rootfs": true,
    "user": "1001:1001"
  },
  "resources": {
    "cpu": {
      "limit": "2000m",
      "request": "500m"
    },
    "memory": {
      "limit": "1Gi",
      "request": "256Mi"
    }
  },
  "healthcheck": {
    "endpoint": "/api/health",
    "interval": 30,
    "timeout": 3,
    "retries": 3,
    "start_period": 10
  },
  "routing": {
    "type": "http",
    "domain": "dstack-demo.phala.network",
    "tls": {
      "enabled": true,
      "redirect_http": true
    },
    "cors": {
      "enabled": true,
      "origins": ["*"],
      "methods": ["GET", "POST", "OPTIONS"],
      "headers": ["Content-Type", "Authorization"]
    },
    "rate_limiting": {
      "enabled": true,
      "requests_per_minute": 60,
      "burst": 10
    }
  },
  "metadata": {
    "author": "HashWarlock",
    "repository": "https://github.com/HashWarlock/the-accountant",
    "license": "MIT",
    "tags": ["dstack", "tee", "ethereum", "wallet", "demo"],
    "documentation": "https://github.com/HashWarlock/the-accountant/blob/main/README.md"
  },
  "deployment": {
    "replicas": 1,
    "strategy": "RollingUpdate",
    "max_unavailable": 0,
    "max_surge": 1,
    "min_ready_seconds": 10,
    "progress_deadline_seconds": 600
  },
  "monitoring": {
    "metrics": {
      "enabled": true,
      "port": 9090,
      "path": "/metrics"
    },
    "logging": {
      "level": "info",
      "format": "json",
      "output": "stdout"
    }
  },
  "cvm": {
    "version": "2.0",
    "network": "phala",
    "worker_type": "attestable",
    "confidential": true,
    "persistent_storage": true,
    "auto_restart": true,
    "max_restarts": 3
  }
}